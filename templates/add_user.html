{% extends "base.html" %} 
{% block content %} 
    {% for message in get_flashed_messages() %}
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            {{ message }}
        <button
            type="button"
            class="btn-close"
            data-bs-dismiss="alert"
            aria-label="Close"
        ></button>
        </div>
    {% endfor %} 

{% if name %}
    <h1>User Added</h1>
    <br>
    <table class="table">
        <thead>
            <tr>
                <th scope="col">ID</th>
                <th scope="col">Name</th>
                <th scope="col">UserName</th>
                <th scope="col">Email</th>
                <th scope="col">Favorite Color</th>
            </tr>
        </thead>
        <tbody>
            {% for our_user in our_users %}
            <tr>
                <td>{{ our_user.id }}</td>
                <td>{{ our_user.name }}</td>
                <td>{{ our_user.username }}</td>
                <td>{{ our_user.email }}</td>
                <td>{{ our_user.favorite_color }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}

<h1>User List</h1>
<br />
<div class="shadow p-3 mb-5 bg-body rounded">
<form action="" method="POST">
    {{form.hidden_tag()}} 

    {{form.name.label(class="form-label")}}
    {{form.name(class="form-control")}} 
    
    {{form.username.label(class="form-label")}}
    {{form.username(class="form-control")}} 
    
    {{form.email.label(class="form-label")}}
    {{form.email(class="form-control")}}

    {{form.password_hash.label(class="form-label")}}
    {{form.password_hash(class="form-control")}}

    {{form.password_hash2.label(class="form-label")}}
    {{form.password_hash2(class="form-control")}}

    {{form.favorite_color.label(class="form-label")}}
    {{form.favorite_color(class="form-control")}}
    <br />
    {{form.submit(class="btn btn-secondary")}}
</form>
</div>
<br>
<br>
<table class="table table-hover table-bordered table-striped">
    <thead>
        <tr>
            <th scope="col">ID</th>
            <th scope="col">Name</th>
            <th scope="col">UserName</th>
            <th scope="col">Email</th>
            <th scope="col">Favorite Color</th>
            <th scope="col">Password</th>
            <th scope="col">Update</th>
            <th scope="col">Delete</th>
            
        </tr>
    </thead>
    <tbody>
        {% for our_user in our_users %}
        <tr>
            <td>{{ our_user.id }}</td>
            <td>{{ our_user.name }}</td>
            <td>{{ our_user.username }}</td>
            <td>{{ our_user.email }}</td>
            <td>{{ our_user.favorite_color }}</td>
            <td>{{ our_user.password_hash }}</td>
            <td><a href="{{ url_for('update_user', id=our_user.id) }}">Update</a></td>
            <td><a href="{{ url_for('delete_record', id=our_user.id) }}">Delete</a></td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endif %} 
{% endblock %}
